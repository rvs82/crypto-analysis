<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Криптоданные (M5) - Анализ</title>
    <style>
        body { background-color: black; color: #fff; font-family: Arial, sans-serif; }
        h2 { color: #fff; }
        p { color: #fff; }
        .recommendation.long { color: #0f0; }
        .recommendation.short { color: #f00; }
        .recommendation.neutral { color: #ff0; }
        .market-sentiment {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .long-sentiment {
            background-color: #0f0;
            color: black;
            padding: 10px;
            width: 48%;
            text-align: center;
            font-weight: bold;
        }
        .short-sentiment {
            background-color: #f00;
            color: white;
            padding: 10px;
            width: 48%;
            text-align: center;
            font-weight: bold;
        }
        .indicators { font-size: 0.9em; margin-top: 5px; line-height: 1.2; }
    </style>
</head>
<body>
    <div class="market-sentiment">
        <div class="long-sentiment" id="long-sentiment">Лонги: 0%</div>
        <div class="short-sentiment" id="short-sentiment">Шорты: 0%</div>
    </div>

    <h2>LDO/USDT</h2>
    <p class="recommendation" id="ldo_trade_rec">Загрузка...</p>
    <div class="indicators" id="ldo_indicators">RSI: -, EMA50: -, EMA200: -, MACD: -, Bollinger: - / - / -, VWAP: -, ATR: -, Stochastic: - / -, ADX: -, CCI: -, OBV: -, SAR: -, Pattern: -, Prediction: -, Levels: - / -</div>

    <h2>AVAX/USDT</h2>
    <p class="recommendation" id="avax_trade_rec">Загрузка...</p>
    <div class="indicators" id="avax_indicators">RSI: -, EMA50: -, EMA200: -, MACD: -, Bollinger: - / - / -, VWAP: -, ATR: -, Stochastic: - / -, ADX: -, CCI: -, OBV: -, SAR: -, Pattern: -, Prediction: -, Levels: - / -</div>

    <h2>XLM/USDT</h2>
    <p class="recommendation" id="xlm_trade_rec">Загрузка...</p>
    <div class="indicators" id="xlm_indicators">RSI: -, EMA50: -, EMA200: -, MACD: -, Bollinger: - / - / -, VWAP: -, ATR: -, Stochastic: - / -, ADX: -, CCI: -, OBV: -, SAR: -, Pattern: -, Prediction: -, Levels: - / -</div>

    <h2>HBAR/USDT</h2>
    <p class="recommendation" id="hbar_trade_rec">Загрузка...</p>
    <div class="indicators" id="hbar_indicators">RSI: -, EMA50: -, EMA200: -, MACD: -, Bollinger: - / - / -, VWAP: -, ATR: -, Stochastic: - / -, ADX: -, CCI: -, OBV: -, SAR: -, Pattern: -, Prediction: -, Levels: - / -</div>

    <h2>BAT/USDT</h2>
    <p class="recommendation" id="bat_trade_rec">Загрузка...</p>
    <div class="indicators" id="bat_indicators">RSI: -, EMA50: -, EMA200: -, MACD: -, Bollinger: - / - / -, VWAP: -, ATR: -, Stochastic: - / -, ADX: -, CCI: -, OBV: -, SAR: -, Pattern: -, Prediction: -, Levels: - / -</div>

    <h2>AAVE/USDT</h2>
    <p class="recommendation" id="aave_trade_rec">Загрузка...</p>
    <div class="indicators" id="aave_indicators">RSI: -, EMA50: -, EMA200: -, MACD: -, Bollinger: - / - / -, VWAP: -, ATR: -, Stochastic: - / -, ADX: -, CCI: -, OBV: -, SAR: -, Pattern: -, Prediction: -, Levels: - / -</div>

    <script>
        async function updateData() {
            try {
                const response = await fetch('/data');
                const data = await response.json();

                const symbols = ['LDOUSDT', 'AVAXUSDT', 'XLMUSDT', 'HBARUSDT', 'BATUSDT', 'AAVEUSDT'];
                symbols.forEach(symbol => {
                    const rec = data.recommendations[symbol];
                    const element = document.getElementById(`${symbol.toLowerCase().replace('usdt', '')}_trade_rec`);
                    element.textContent = rec.direction === 'Нейтрально' 
                        ? 'Нейтрально' 
                        : `${rec.direction}, Открытие: ${rec.entry.toFixed(4)}, Стоп-лосс: ${rec.stopLoss.toFixed(4)}, Фиксация: ${rec.takeProfit.toFixed(4)}, Вероятность: ${rec.confidence.toFixed(2)}%`;
                    element.className = `recommendation ${rec.direction.toLowerCase()}`;

                    const indicators = document.getElementById(`${symbol.toLowerCase().replace('usdt', '')}_indicators`);
                    indicators.textContent = `RSI: ${rec.rsi.toFixed(2)}, EMA50: ${rec.ema50.toFixed(4)}, EMA200: ${rec.ema200.toFixed(4)}, ` +
                        `MACD: ${rec.macd.histogram.toFixed(4)}, Bollinger: ${rec.bollinger.upper.toFixed(4)} / ${rec.bollinger.middle.toFixed(4)} / ${rec.bollinger.lower.toFixed(4)}, ` +
                        `VWAP: ${rec.vwap.toFixed(4)}, ATR: ${rec.atr.toFixed(4)}, Stochastic: ${rec.stochastic.k.toFixed(2)} / ${rec.stochastic.d.toFixed(2)}, ` +
                        `ADX: ${rec.adx.toFixed(2)}, CCI: ${rec.cci.toFixed(2)}, OBV: ${rec.obv.toFixed(0)}, SAR: ${rec.sar.toFixed(4)}, ` +
                        `Pattern: ${rec.pattern}, Prediction: ${rec.prediction.toFixed(4)}, Levels: ${rec.levels.support.toFixed(4)} / ${rec.levels.resistance.toFixed(4)}`;
                });

                document.getElementById('long-sentiment').textContent = `Лонги: ${(data.sentiment.long / 6 * 100).toFixed(2)}%`;
                document.getElementById('short-sentiment').textContent = `Шорты: ${(data.sentiment.short / 6 * 100).toFixed(2)}%`;
            } catch (error) {
                console.error('Ошибка получения данных:', error);
            }
        }

        updateData();
        setInterval(updateData, 5000); // Обновление каждые 5 секунд
    </script>
</body>
</html>
